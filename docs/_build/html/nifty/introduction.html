

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; nifty 1.0.0.dev1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="nifty 1.0.0.dev1 documentation" href="../index.html"/>
        <link rel="next" title="Example of Nifty File I/O" href="fileIO.html"/>
        <link rel="prev" title="Welcome to Nifty’s documentation!" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> nifty
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="#running-from-the-command-line">Running from the Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="#running-from-python">Running from Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#examples-of-running-from-the-command-line">Examples of Running from the Command Line</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#preparing-the-cfg-input-file">Preparing the .cfg Input File</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interactive-input-preparation">Interactive Input Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#an-example-input-file">An Example Input File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#data-reduction-examples">Data Reduction Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#observations-of-titan">Observations of Titan</a></li>
<li class="toctree-l2"><a class="reference internal" href="#observations-of-a-moderate-redshift-galaxy">Observations of a Moderate Redshift Galaxy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#tutorials">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#h-line-removal">H Line Removal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-telluric-corrections">Custom Telluric Corrections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#merging-data-cubes">Merging Data Cubes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#known-issues">Known Issues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nifspipeline-py">nifsPipeline.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifssort-py">nifsSort.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifsbaselinecalibration-py">nifsBaselineCalibration.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifsreduce-py">nifsReduce.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifsmerge-py">nifsMerge.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifstelluric-py">nifsTelluric.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifsfluxcalibrate-py">nifsFluxCalibrate.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nifsutils-py">nifsUtils.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-issues">General Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#maintaining-nifty">Maintaining Nifty</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pipeline-structure">Pipeline Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updates">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-conventions">Code Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#future-work">Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="#changelog">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#unreleased">Unreleased</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">1.0.0 - 2017-09-12</a></li>
<li class="toctree-l2"><a class="reference internal" href="#b4-2017-09-12">1.0b4 - 2017-09-12</a></li>
<li class="toctree-l2"><a class="reference internal" href="#b1-2017-09-08">1.0b1 - 2017-09-08</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a1-2017-08-31">1.0a1 - 2017-08-31</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="fileIO.html">Example of Nifty File I/O</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">nifty</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/nifty/introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>Nifty, for now, uses Python 2.7. Please keep this in mind.</p>
</div>
<div class="section" id="running-from-the-command-line">
<h1>Running from the Command Line<a class="headerlink" href="#running-from-the-command-line" title="Permalink to this headline">¶</a></h1>
<p>Nifty is started with the runNifty command by specifying a pipeline or step with arguments and options.</p>
<p>The syntax used to start Nifty is:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty &lt;Pipeline or Step Name&gt; &lt;arguments&gt;
</pre></div>
</div>
<p>To get help or list the available options, type the runNifty command without any arguments.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty
</pre></div>
</div>
</div>
<div class="section" id="running-from-python">
<h1>Running from Python<a class="headerlink" href="#running-from-python" title="Permalink to this headline">¶</a></h1>
<p>Python Programmers: even though Nifty’s API has not been defined yet, you can still run Nifty Pipelines, Steps, Routines and Tasks from a Python interpeter
by importing them.</p>
<p>For example, to run a final cube merge from the Python interpreter:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import relevant modules; you can find those at top of nifsMerge.py</span>
<span class="kn">from</span> <span class="nn">pyraf</span> <span class="kn">import</span> <span class="n">iraf</span><span class="p">,</span> <span class="n">iraffunctions</span>
<span class="c1"># Import relevant local script</span>
<span class="kn">import</span> <span class="nn">nifty.pipeline.steps.nifsMerge</span>

<span class="c1"># Set up iraf</span>
<span class="n">iraf</span><span class="o">.</span><span class="n">gemini</span><span class="p">()</span>
<span class="n">iraf</span><span class="o">.</span><span class="n">gemtools</span><span class="p">()</span>
<span class="n">iraf</span><span class="o">.</span><span class="n">gnirs</span><span class="p">()</span>
<span class="n">iraf</span><span class="o">.</span><span class="n">nifs</span><span class="p">()</span>

<span class="c1"># Define routine parameters</span>
<span class="n">scienceDirectoryList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">cubeType</span> <span class="o">=</span> <span class="s2">&quot;uncorrected&quot;</span>
<span class="n">mergeType</span> <span class="o">=</span> <span class="s2">&quot;sum&quot;</span>
<span class="n">use_pq_offsets</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">im3dtran</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">over</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c1"># Start the cube merging</span>
<span class="n">nifty</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">nifsMerge</span><span class="o">.</span><span class="n">mergeCubes</span><span class="p">(</span><span class="n">scienceDirectoryList</span><span class="p">,</span> <span class="n">cubeType</span><span class="p">,</span> <span class="n">mergeType</span><span class="p">,</span> <span class="n">use_pq_offsets</span><span class="p">,</span> <span class="n">im3dtran</span><span class="p">,</span> <span class="n">over</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You might be able to figure out what imports you need by checking the tops of the relevant scripts.</p>
<div class="section" id="examples-of-running-from-the-command-line">
<h2>Examples of Running from the Command Line<a class="headerlink" href="#examples-of-running-from-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>Starting a Data Reduction from the Beginning</p>
<p>Supply the -i flag to start the NIFS pipeline, populating a configuration file interactively:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline -i
</pre></div>
</div>
<p>Supply a config.cfg file to start the NIFS pipeline from a pre-built configuration file:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
<p>Supply the -f flat to do a fully automatic data reduction, downloading raw data from the Gemini Public Archive (Eg: GN-2013A-Q-62):</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline -f GN-2013A-Q-62
</pre></div>
</div>
<p>Supply the -f flag to do a fully automatic data reduction, using raw data from a local directory (Eg: /Users/ncomeau/data/TUTORIAL):</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline -f /Users/ncomeau/data/TUTORIAL
</pre></div>
</div>
<p>Starting a Data Reduction from a Specified Point</p>
<p>You can run each step, one at a time, from the command line like so. <em>You need a config.cfg file in your current working directory to run individual steps.
Each step requires the general config section and its unique config section to be populated</em>.</p>
<p>You can also run an individual step by turning them on or off in nifsPipeline config and running the nifsPipeline.</p>
<p><strong>nifsSort:</strong> To only copy and sort NIFS raw data use a config.cfg file like this:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
extractionXC = 15.0
extractionYC = 33.0
extractionRadius = 2.5
scienceOneDExtraction = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = True
calibrationReduction = False
telluricReduction = False
scienceReduction = False
telluricCorrection = False
fluxCalibration = False
merge = False
telluricCorrectionMethod = &#39;gnirs&#39;
fluxCalibrationMethod = &#39;gnirs&#39;
mergeMethod = &#39;&#39;

[sortConfig]
rawPath = &#39;/Users/nat/data/TUTORIAL&#39;
program = &#39;&#39;
proprietaryCookie = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
telluricTimeThreshold = 5400

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 5
telluricSkySubtraction = True

[telluricCorrectionConfig]
telluricCorrectionStart = 1
telluricCorrectionStop = 9
hLineMethod = &#39;vega&#39;
hLineInter = False
continuumInter = False
telluricInter = False
tempInter = False
standardStarSpecTemperature = &#39;&#39;
standardStarMagnitude = &#39;&#39;
standardStarRA = &#39;&#39;
standardStarDec = &#39;&#39;
standardStarBand = &#39;&#39;

[fluxCalbrationConfig]
fluxCalibrationStart = 1
fluxCalibrationStop = 6

[mergeConfig]
mergeStart = 1
mergeStop = 3
mergeType = &#39;median&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
<p>And run the nifsPipeline with:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
<p><strong>nifsBaselineCalibration:</strong> To only reduce calibrations use a config.cfg file like this:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
extractionXC = 15.0
extractionYC = 33.0
extractionRadius = 2.5
scienceOneDExtraction = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = False
calibrationReduction = True
telluricReduction = False
scienceReduction = False
telluricCorrection = False
fluxCalibration = False
merge = False
telluricCorrectionMethod = &#39;gnirs&#39;
fluxCalibrationMethod = &#39;gnirs&#39;
mergeMethod = &#39;&#39;

[sortConfig]
rawPath = &#39;/Users/nat/data/TUTORIAL&#39;
program = &#39;&#39;
proprietaryCookie = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
telluricTimeThreshold = 5400

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 5
telluricSkySubtraction = True

[telluricCorrectionConfig]
telluricCorrectionStart = 1
telluricCorrectionStop = 9
hLineMethod = &#39;vega&#39;
hLineInter = False
continuumInter = False
telluricInter = False
tempInter = False
standardStarSpecTemperature = &#39;&#39;
standardStarMagnitude = &#39;&#39;
standardStarRA = &#39;&#39;
standardStarDec = &#39;&#39;
standardStarBand = &#39;&#39;

[fluxCalbrationConfig]
fluxCalibrationStart = 1
fluxCalibrationStop = 6

[mergeConfig]
mergeStart = 1
mergeStop = 3
mergeType = &#39;median&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
<p>And run the nifsPipeline with:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
<p><strong>nifsReduce Telluric:</strong> To only reduce telluric data use a config.cfg file like this:
<em>Make sure to populate scienceDirectoryList, telluricDirectoryList and calibrationDirectoryList before running!</em></p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
extractionXC = 15.0
extractionYC = 33.0
extractionRadius = 2.5
scienceOneDExtraction = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = False
calibrationReduction = False
telluricReduction = True
scienceReduction = False
telluricCorrection = False
fluxCalibration = False
merge = False
telluricCorrectionMethod = &#39;gnirs&#39;
fluxCalibrationMethod = &#39;gnirs&#39;
mergeMethod = &#39;&#39;

[sortConfig]
rawPath = &#39;/Users/nat/data/TUTORIAL&#39;
program = &#39;&#39;
proprietaryCookie = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
telluricTimeThreshold = 5400

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 5
telluricSkySubtraction = True

[telluricCorrectionConfig]
telluricCorrectionStart = 1
telluricCorrectionStop = 9
hLineMethod = &#39;vega&#39;
hLineInter = False
continuumInter = False
telluricInter = False
tempInter = False
standardStarSpecTemperature = &#39;&#39;
standardStarMagnitude = &#39;&#39;
standardStarRA = &#39;&#39;
standardStarDec = &#39;&#39;
standardStarBand = &#39;&#39;

[fluxCalbrationConfig]
fluxCalibrationStart = 1
fluxCalibrationStop = 6

[mergeConfig]
mergeStart = 1
mergeStop = 3
mergeType = &#39;median&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
<p>And run the nifsPipeline with:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
<p><strong>nifsReduce Science:</strong> To only reduce science data use a config.cfg file like this:
<em>Make sure to populate scienceDirectoryList, telluricDirectoryList and calibrationDirectoryList before running!</em></p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
extractionXC = 15.0
extractionYC = 33.0
extractionRadius = 2.5
scienceOneDExtraction = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = False
calibrationReduction = False
telluricReduction = False
scienceReduction = True
telluricCorrection = False
fluxCalibration = False
merge = False
telluricCorrectionMethod = &#39;gnirs&#39;
fluxCalibrationMethod = &#39;gnirs&#39;
mergeMethod = &#39;&#39;

[sortConfig]
rawPath = &#39;/Users/nat/data/TUTORIAL&#39;
program = &#39;&#39;
proprietaryCookie = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
telluricTimeThreshold = 5400

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 5
telluricSkySubtraction = True

[telluricCorrectionConfig]
telluricCorrectionStart = 1
telluricCorrectionStop = 9
hLineMethod = &#39;vega&#39;
hLineInter = False
continuumInter = False
telluricInter = False
tempInter = False
standardStarSpecTemperature = &#39;&#39;
standardStarMagnitude = &#39;&#39;
standardStarRA = &#39;&#39;
standardStarDec = &#39;&#39;
standardStarBand = &#39;&#39;

[fluxCalbrationConfig]
fluxCalibrationStart = 1
fluxCalibrationStop = 6

[mergeConfig]
mergeStart = 1
mergeStop = 3
mergeType = &#39;median&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
<p>And run the nifsPipeline with:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
<p><strong>nifsTelluric Correction:</strong> To only derive and apply a telluric correction use a config.cfg file like this:
<em>Make sure to populate scienceDirectoryList, telluricDirectoryList and calibrationDirectoryList before running!</em></p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
extractionXC = 15.0
extractionYC = 33.0
extractionRadius = 2.5
scienceOneDExtraction = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = False
calibrationReduction = False
telluricReduction = False
scienceReduction = False
telluricCorrection = True
fluxCalibration = False
merge = False
telluricCorrectionMethod = &#39;gnirs&#39;
fluxCalibrationMethod = &#39;gnirs&#39;
mergeMethod = &#39;&#39;

[sortConfig]
rawPath = &#39;/Users/nat/data/TUTORIAL&#39;
program = &#39;&#39;
proprietaryCookie = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
telluricTimeThreshold = 5400

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 5
telluricSkySubtraction = True

[telluricCorrectionConfig]
telluricCorrectionStart = 1
telluricCorrectionStop = 9
hLineMethod = &#39;vega&#39;
hLineInter = False
continuumInter = False
telluricInter = False
tempInter = False
standardStarSpecTemperature = &#39;&#39;
standardStarMagnitude = &#39;&#39;
standardStarRA = &#39;&#39;
standardStarDec = &#39;&#39;
standardStarBand = &#39;&#39;

[fluxCalbrationConfig]
fluxCalibrationStart = 1
fluxCalibrationStop = 6

[mergeConfig]
mergeStart = 1
mergeStop = 3
mergeType = &#39;median&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
<p>And run the nifsPipeline with:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
<p><strong>nifsFluxCalibration:</strong> To only do a flux calibration use a config.cfg file like this:
<em>Make sure to populate scienceDirectoryList, telluricDirectoryList and calibrationDirectoryList before running!</em></p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
extractionXC = 15.0
extractionYC = 33.0
extractionRadius = 2.5
scienceOneDExtraction = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = False
calibrationReduction = False
telluricReduction = False
scienceReduction = False
telluricCorrection = False
fluxCalibration = True
merge = False
telluricCorrectionMethod = &#39;gnirs&#39;
fluxCalibrationMethod = &#39;gnirs&#39;
mergeMethod = &#39;&#39;

[sortConfig]
rawPath = &#39;/Users/nat/data/TUTORIAL&#39;
program = &#39;&#39;
proprietaryCookie = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
telluricTimeThreshold = 5400

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 5
telluricSkySubtraction = True

[telluricCorrectionConfig]
telluricCorrectionStart = 1
telluricCorrectionStop = 9
hLineMethod = &#39;vega&#39;
hLineInter = False
continuumInter = False
telluricInter = False
tempInter = False
standardStarSpecTemperature = &#39;&#39;
standardStarMagnitude = &#39;&#39;
standardStarRA = &#39;&#39;
standardStarDec = &#39;&#39;
standardStarBand = &#39;&#39;

[fluxCalbrationConfig]
fluxCalibrationStart = 1
fluxCalibrationStop = 6

[mergeConfig]
mergeStart = 1
mergeStop = 3
mergeType = &#39;median&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
<p>And run the nifsPipeline with:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
<p><strong>nifsMerge Cube Merging:</strong> To only merge final data cubes use a config.cfg file like this:
<em>Make sure to populate scienceDirectoryList, telluricDirectoryList and calibrationDirectoryList before running!</em></p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
extractionXC = 15.0
extractionYC = 33.0
extractionRadius = 2.5
scienceOneDExtraction = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = False
calibrationReduction = False
telluricReduction = False
scienceReduction = False
telluricCorrection = True
fluxCalibration = False
merge = True
telluricCorrectionMethod = &#39;gnirs&#39;
fluxCalibrationMethod = &#39;gnirs&#39;
mergeMethod = &#39;&#39;

[sortConfig]
rawPath = &#39;/Users/nat/data/TUTORIAL&#39;
program = &#39;&#39;
proprietaryCookie = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
telluricTimeThreshold = 5400

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 5
telluricSkySubtraction = True

[telluricCorrectionConfig]
telluricCorrectionStart = 1
telluricCorrectionStop = 9
hLineMethod = &#39;vega&#39;
hLineInter = False
continuumInter = False
telluricInter = False
tempInter = False
standardStarSpecTemperature = &#39;&#39;
standardStarMagnitude = &#39;&#39;
standardStarRA = &#39;&#39;
standardStarDec = &#39;&#39;
standardStarBand = &#39;&#39;

[fluxCalbrationConfig]
fluxCalibrationStart = 1
fluxCalibrationStop = 6

[mergeConfig]
mergeStart = 1
mergeStop = 3
mergeType = &#39;median&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
<p>And run the nifsPipeline with:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline config.cfg
</pre></div>
</div>
</div>
</div>
<div class="section" id="preparing-the-cfg-input-file">
<h1>Preparing the .cfg Input File<a class="headerlink" href="#preparing-the-cfg-input-file" title="Permalink to this headline">¶</a></h1>
<p>Nifty reads data reduction parameters with a config parser developed by Michael Foord. See
<a class="reference external" href="http://www.voidspace.org.uk/python/configobj.html">http://www.voidspace.org.uk/python/configobj.html</a> for full documentation on the parser.</p>
<div class="section" id="interactive-input-preparation">
<h2>Interactive Input Preparation<a class="headerlink" href="#interactive-input-preparation" title="Permalink to this headline">¶</a></h2>
<p>The best way to learn about what each config file parameter does is to populate an input file interactively by typing:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty nifsPipeline -i
</pre></div>
</div>
<p>This will, for each parameter, print an explanation and supply a default parameter that you can accept by pressing enter. The output file
is named “config.cfg”.</p>
</div>
<div class="section" id="an-example-input-file">
<h2>An Example Input File<a class="headerlink" href="#an-example-input-file" title="Permalink to this headline">¶</a></h2>
<p>Nifty includes a default configuration file in the runtimeData/ directory. As of v1.0b2, It looks like this:
.. TODO(nat): This is out of data! Update this!</p>
<div class="highlight-text"><div class="highlight"><pre><span></span># Nifty configuration file.
#
# Each section lists parameters required by a pipeline step.

manualMode = False
over = False
merge = True
scienceDirectoryList = []
telluricDirectoryList = []
calibrationDirectoryList = []

[nifsPipelineConfig]
sort = True
calibrationReduction = True
telluricReduction = True
scienceReduction = True

[sortConfig]
rawPath = &#39;&#39;
program = &#39;&#39;
skyThreshold = 2.0
sortTellurics = True
date = &#39;&#39;
copy = &#39;&#39;

[calibrationReductionConfig]
baselineCalibrationStart = 1
baselineCalibrationStop = 4

[telluricReductionConfig]
telStart = 1
telStop = 6
telluricSkySubtraction = True
spectemp = &#39;&#39;
mag = &#39;&#39;
hline_method = &#39;vega&#39;
hlineinter = False
continuuminter = False

[scienceReductionConfig]
sciStart = 1
sciStop = 6
scienceSkySubtraction = True
telluricCorrectionMethod = &#39;&#39;
telinter = False
fluxCalibrationMethod = &#39;&#39;
use_pq_offsets = True
im3dtran = True

# Good luck with your Science!
</pre></div>
</div>
</div>
</div>
<div class="section" id="data-reduction-examples">
<h1>Data Reduction Examples<a class="headerlink" href="#data-reduction-examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="observations-of-titan">
<h2>Observations of Titan<a class="headerlink" href="#observations-of-titan" title="Permalink to this headline">¶</a></h2>
<p>Recipe used: defaultConfig.cfg</p>
</div>
<div class="section" id="observations-of-a-moderate-redshift-galaxy">
<h2>Observations of a Moderate Redshift Galaxy<a class="headerlink" href="#observations-of-a-moderate-redshift-galaxy" title="Permalink to this headline">¶</a></h2>
<p>Recipe used: defaultConfig.cfg</p>
<p>Let’s reduce NIFS data of a moderate redshift galaxy, located at z ~ 1.284. This is a faint target, so after making
individual cubes we use the reported telescope P and Q offsets to blindly merge our final cubes.</p>
<p>As this program is out of its proprietary period and available on the Gemini Public Archive, we can use the defaultConfig.cfg configuration
file and specify its program ID to reduce it.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty -f GN-2013A-Q-62
</pre></div>
</div>
<p>We could also launch the reduction from a provided configuration file.</p>
<p>Contents of the configuration file:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>TODO(nat): When finalized fill this out!
</pre></div>
</div>
<p>To launch the reduction:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>runNifty &lt;configurationFile&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<div class="section" id="h-line-removal">
<h2>H Line Removal<a class="headerlink" href="#h-line-removal" title="Permalink to this headline">¶</a></h2>
<p>The H-line removal can be done non-interactively, but it is advised that this be performed
interactively and using the “vega_tweak” method in order to accurately scale the vega spectrum.
In the interactive mode for the initial scaling and call to “telluric” these are the cursor keys
and colon commands (from <a class="reference external" href="http://iraf.net/irafhelp.php?val=telluric&amp;help=Help+Page">http://iraf.net/irafhelp.php?val=telluric&amp;help=Help+Page</a>):</p>
<ul class="simple">
<li>? - print help</li>
<li>a - automatic RMS minimization within sample regions</li>
<li>c - toggle calibration spectrum display</li>
<li>d - toggle data spectrum display</li>
<li>e - expand (double) the step for the current selection</li>
<li>q - quit</li>
<li>r - redraw the graphs</li>
<li>s - add or reset sample regions</li>
<li>w - window commands (see :/help for additional information)</li>
<li>x - graph and select from corrected shifted candidates</li>
<li>y - graph and select from corrected scaled candidates</li>
<li>:help           - print help</li>
<li>:shift  [value] - print or reset the current shift</li>
<li>:scale  [value] - print or reset the current scale</li>
<li>:dshift [value] - print or reset the current shift step</li>
<li>:dscale [value] - print or reset the current scale step</li>
<li>:offset [value] - print or reset the current offset between spectra</li>
<li>:sample [value] - print or reset the sample regions</li>
<li>:smooth [value] - print or reset the smoothing box size</li>
</ul>
<p>To decrease the scale or shift value, the cursor must be under the spectrum and to increase
these values the cursor must be above the spectrum. Occasionally, this will not work in which
case the value can be designated with a colon command.</p>
<p>If using the vega_tweak or other interactive line removal method, the lines can be removed
in a splot environment (commands found here: <a class="reference external" href="http://stsdas.stsci.edu/cgi-bin/gethelp.cgi?splot.hlp">http://stsdas.stsci.edu/cgi-bin/gethelp.cgi?splot.hlp</a>).
The most useful commands for this are:</p>
<ul class="simple">
<li>k + (g, l or v)</li>
</ul>
<p>Mark two continuum points and fit a single line profile. The second key selects the
type of profile: g for gaussian, l for lorentzian, and v for voigt. Any other second key
defaults to gaussian. The center, continuum at the center, core intensity, integrated flux,
equivalent width, and FWHMs are printed and saved in the log file. See d for fitting multiple profiles and - to subtract the fit.</p>
<ul class="simple">
<li>w</li>
</ul>
<p>Window the graph. For further help type ? to the “window:” prompt or see help under gtools.
To cancel the windowing use a.</p>
<p>It is necessary to press ‘i’ before ‘q’ once the h-lines have been removed in order to save the changes.</p>
</div>
<div class="section" id="custom-telluric-corrections">
<h2>Custom Telluric Corrections<a class="headerlink" href="#custom-telluric-corrections" title="Permalink to this headline">¶</a></h2>
<p>You can supply your own continuum-normalized telluric correction spectrum by placing a “telluricCorrection.fits” one D spectra
and a “fit.fits” that you used to normalize that spectra in the science observation directory. Both spectra must be 2040 pixels
long and have the data extension located in header unit zero. Note that overwrite must be turned off for this to work.</p>
</div>
<div class="section" id="merging-data-cubes">
<h2>Merging Data Cubes<a class="headerlink" href="#merging-data-cubes" title="Permalink to this headline">¶</a></h2>
<p>Nifty offers a few ways to merge data cubes. These are all contained in the
nifsMerge.py script.</p>
<p><strong>Note:</strong> If cubes are not transposed each call to iraf.imcombine() can take
25 minutes or more. The current implementation is much slower at combining when cubes
have a y-offset.</p>
<p>Cubes Were Shifted by Hand with QFitsView or Similar</p>
<p>A user can shift cubes by hand and add the prefix “shift” to the cube name. The
pipeline will automatically find these cubes and combine them with gemcube.</p>
<p>If no “shift”-prefixed cubes exist the user has two more choices to make. The first is to
generate offsets automatically or to provide an offsets file by hand.</p>
<p>Generating an offsets.txt File</p>
<p>If use_pq_offsets is True in the config.cfg file, <em>Nifty</em> will determine offsets automatically from the
POFFSET and QOFFSET entry of each cubes .fits header. Otherwise, <em>Nifty</em> will pause
and wait for you to provide a suitably formatted offsets.txt file in the
scienceObjectName/Merged/date_obsid/ directory.</p>
<p>Using iraf.im3dtran()</p>
<p>Cubes have been found to combine ~50 times faster when the y and lambda axis are
swapped with iraf.im3dtran(). In our tests we found it took ~25 minutes to merge
cubes without transposition and ~0.5 minutes to merge cubes in a tranposed state.</p>
<p>We have found the cubes produced with and without tranposition to be identical. We
have made the default not to use transposition but we urge further testing.</p>
</div>
</div>
<div class="section" id="known-issues">
<h1>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nifspipeline-py">
<h2>nifsPipeline.py<a class="headerlink" href="#nifspipeline-py" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="nifssort-py">
<h2>nifsSort.py<a class="headerlink" href="#nifssort-py" title="Permalink to this headline">¶</a></h2>
<p>Two things can routinely cause nifsSort to fail.</p>
<p>Object and Sky frame differentiation</p>
<p>Relevant warning:</p>
<p>..code-block:: text</p>
<blockquote>
<div><blockquote>
<div><dl class="docutils">
<dt>WARNING in sort: science ” &lt;scienceObservationName&gt;</dt>
<dd>in ” &lt;currentWorkingDirectory&gt;
does not have a scienceFrameList.”)
I am trying to rewrite it with zero point offsets.</dd>
</dl>
</div></blockquote>
</div></blockquote>
<p>Solution:</p>
<ul class="simple">
<li>Change the skyThreshold parameter (given in arc seconds) and re-run sort.</li>
</ul>
<p>If the sorting script does not create a skyFrameList in the object or telluric observation
directories this means that the offsets between sky frames and object frames were different
than expected. A skyFrameList can be manually created and saved in the appropriate directory, or
the skyThreshold parameter modified.</p>
<p>Telluric and Science Frame Matching</p>
<p>Relevant warning:</p>
<p>..code-block:: text</p>
<blockquote>
<div><dl class="docutils">
<dt>WARNING in sort: no tellurics data found for science ” &lt;scienceImageName&gt;</dt>
<dd>in ” &lt;currentWorkingdirectory</dd>
</dl>
</div></blockquote>
<p>Solution:</p>
<ul class="simple">
<li>Raise telluricTimeThreshold to something above 5400 seconds.</li>
</ul>
<p>By default standard star observations are matched with each science frame if they
are within 1.5 hours (5400) seconds in UT start time. Sometimes just a few science frames
will be outside that threshold.</p>
<p>If you see the relevant warning after running sort, you will have to raise the
telluricTimeThreshold in the config.cfg file if you want to do telluric corrections.</p>
</div>
<div class="section" id="nifsbaselinecalibration-py">
<h2>nifsBaselineCalibration.py<a class="headerlink" href="#nifsbaselinecalibration-py" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Long data file path names are not fed to IRAF tasks</strong>. It seems IRAF task parameters</li>
</ul>
<p>must be 99 characters or less. Nifty’s data files are stored in the Astroconda environment
packages directory; for example, on my system it is “/Users/nat/miniconda2/envs/niftypip/lib/python2.7/site-packages/nifty/pipeline/”.
If you have a long username, for example, this can cause the path name to be too long to
be parsed by iraf.
<em>Temporary fix:</em> I have made the names of all the data files short enough for it to work
okay on my system. <strong>Please let me know if this seems to be
causing you issues and I can come up with a better fix.</strong></p>
</div>
<div class="section" id="nifsreduce-py">
<h2>nifsReduce.py<a class="headerlink" href="#nifsreduce-py" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>z-band data is not capable of a flux calibration (yet!).</li>
<li>Seems to be missing the first peak of the ronchi slit when iraf.nfsdist() is run interactively.
This does not seem to be a problem.</li>
<li>We noticed that iraf.nfsdist() produced different results when run interactively and
non-interactively. To test check the log for iraf.nfsdist() output and make sure it is
identifying 8/8 or 9/9 peaks every time.</li>
<li>iraf.nftelluric() was not built to be run automatically. A lightly tested modified
version that allows an automatic telluric correction is included in the extras directory
but more testing is needed. For now applyTelluricPython() is recommended.</li>
</ul>
</div>
<div class="section" id="nifsmerge-py">
<h2>nifsMerge.py<a class="headerlink" href="#nifsmerge-py" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>When overwrite is turned on, merging the final cubes from multiple directories redundantly repeats.</li>
</ul>
<p>This is a good quick fix for someone to implement.</p>
</div>
<div class="section" id="nifstelluric-py">
<h2>nifsTelluric.py<a class="headerlink" href="#nifstelluric-py" title="Permalink to this headline">¶</a></h2>
<p>nifsTelluric.py and nifsFluxCalibrate.py rely on several IRAF tasks finding information in the correct image
header. If this implicit header data matching changes in future IRAF implementations these tasks will break.
A fix could be to explicitly specify the data header for each task. TODO(nat): Try to do this before you leave.</p>
<ul class="simple">
<li>iraf.imarith() is having some strange errors. I’m using astropy and numpy instead to do the 2 imarith steps.</li>
<li>See nifsFluxCalibrate for the iraf.gemini() and iraf.imarith() bug.</li>
</ul>
</div>
<div class="section" id="nifsfluxcalibrate-py">
<h2>nifsFluxCalibrate.py<a class="headerlink" href="#nifsfluxcalibrate-py" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>If iraf.gemini() is called in nifsTelluric.py and the two steps are run back to back,</strong></li>
</ul>
<p>iraf.imarith() does not work in nifsFluxCalibrate.py. iraf.imarith can’t seem to open the result
of step 3; it throws this error:</p>
<p>..code-block:: text</p>
<blockquote>
<div>3_BBodyN20100401S0182 is not an image or a number</div></blockquote>
<p>When I ran nifsTelluric.py and nifsFluxCalibrated.py back to back, using nifsPipeline.py as a wrapper,
iraf.imarith() <em>worked when iraf.gemini() was commented out in nifsTelluric.py</em>. It crashed with the
above error when iraf.gemini() was uncommented.</p>
<p>I’ve implemented a just-as-good solution using astropy and numpy.</p>
</div>
<div class="section" id="nifsutils-py">
<h2>nifsUtils.py<a class="headerlink" href="#nifsutils-py" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="general-issues">
<h2>General Issues<a class="headerlink" href="#general-issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A longstanding bug (see <a class="reference external" href="https://github.com/astropy/astropy/pull/960">astropy</a> ) in astropy has made it
difficult to build Nifty as a binary executable.</li>
<li>The conversion of print statements to logging.info() statements was messy. Some of these
may still not be properly converted and will throw nasty tracebacks. However these seem to
have no effect on the functionioning of the code.</li>
<li>Logging is still not perfect. One or two iraf tasks are sending their log files to
“nifs.log” instead of “Nifty.log”.</li>
</ul>
</div>
</div>
<div class="section" id="maintaining-nifty">
<h1>Maintaining Nifty<a class="headerlink" href="#maintaining-nifty" title="Permalink to this headline">¶</a></h1>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Right now there exists four forms of documentation.</p>
<p>Paper</p>
<p>README.rst</p>
<p>.rst Files in the docs/ directory</p>
<p>This file, others like it in the docs/ directory and the README are written in
reStructuredText. This markup language integrates well with Python’s automatic
documentation builder (we used Sphinx) and Github as well as being human readable. You can
read more about reStructuredText <a class="reference external" href="http://www.sphinx-doc.org/en/stable/rest.html">here</a>.</p>
<p>Comments and DocStrings in Source Code</p>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>This is a todo. Currently we do not have automated tests.</p>
</div>
<div class="section" id="pipeline-structure">
<h2>Pipeline Structure<a class="headerlink" href="#pipeline-structure" title="Permalink to this headline">¶</a></h2>
<p>See the Nifty paper for a high level overview. Nifty general runs with the following procedure:</p>
<ul class="simple">
<li>A script in the scripts/ directory is called from the command line.</li>
<li>This script imports the relevant pipeline and steps from the nifty/pipeline/ and nifty/pipeline/steps/directories.</li>
<li>The script then launches the appropriate pipeline,</li>
<li>This pipeline launches the appropriate steps,</li>
<li>These steps launch the appropriate routines, and</li>
<li>These routines launch the appropriate sub-routines.</li>
</ul>
<p>Nifty is built at the lowest level from Python and IRAF subroutines. It is built so that it is relatively
easy to change the implementation of the underlying tasks.</p>
</div>
<div class="section" id="updates">
<h2>Updates<a class="headerlink" href="#updates" title="Permalink to this headline">¶</a></h2>
<p>To update Nifty, do five things:</p>
<ul class="simple">
<li><em>Try to do your development in a new branch or fork, not the master branch of the repository</em></li>
<li>Before uploading, do a few test data reductions.</li>
<li>Pick an appropriate version number based on <a class="reference external" href="http://semver.org/">semantic versioning</a>; update the setup.py</li>
<li>Commit all changes to GitHub</li>
<li>Create a new Github Release</li>
<li><a href="#id4"><span class="problematic" id="id5">`Upload the latest version to PyPi.org &lt; https://packaging.python.org/tutorials/distributing-packages/&gt;`_</span></a></li>
</ul>
<p>..code-block:: text</p>
<blockquote>
<div>rm -r dist build             # Clean up old files
python setup.py bdist_wheel  # Build python wheels
twine upload dist/*          # Upload to PyPi.org</div></blockquote>
<p>Version Numbers</p>
<p>Nifty uses semantic versioning(see <a class="reference external" href="http://semver.org/">http://semver.org/</a>). This means version numbers come in</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>MAJOR.MINOR.PATCH
</pre></div>
</div>
<p>In brief, when releasing a version of Nifty that is not backward-compatible with old test recipes,
or changes break the public API, it is time to increment the MAJOR version number.</p>
<p>..TODO(nat): maybe make this a little clearer.</p>
</div>
<div class="section" id="code-conventions">
<h2>Code Conventions<a class="headerlink" href="#code-conventions" title="Permalink to this headline">¶</a></h2>
<p>Nifty was partly written using <a class="reference external" href="https://atom.io/">atom</a>. Error messages,
warnings and updates were partly written using templates in the included snippets.cson file.</p>
<p>Where possible, nat used 2D (and higher) dimensional lists to implement error
checking flags. These are particularly prominent in sort.</p>
<p>Variables and functions were named using conventions in the
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#descriptive-naming-styles">Python Style Guide</a>.
Specifically a mix of camelCase and lower_case_with_underscores was used.</p>
<p>Code style was influenced by the <a class="reference external" href="https://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a>.</p>
<p>Nifty uses the Google docstring style. Examples of docstrings can be found
<a class="reference external" href="http://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html">here</a>.</p>
<p>Other Python comments use the following convention:</p>
<ul class="simple">
<li>A # is followed by a space and a capital letter.</li>
<li>All comments end in a period where possible.</li>
</ul>
</div>
</div>
<div class="section" id="future-work">
<h1>Future Work<a class="headerlink" href="#future-work" title="Permalink to this headline">¶</a></h1>
<p>Throughout the code, ncomeau has placed many TODO notes. These are things that
should be reviewed at some point.</p>
<p>Future work:</p>
<ul class="simple">
<li>Implement more telluric and flux calibration methods.</li>
<li>Implement instrument signature removal routine.</li>
<li>Implement cosmic ray removal routine.</li>
<li>Implement differential atmospheric refraction correction routine.</li>
<li>Implement full automatic Gemini (on server) reduction routine.</li>
<li>Implement a “don’t save intermediate products” switch</li>
<li>Object Oriented rewrite; see the <a class="reference external" href="https://github.com/STScI-JWST/jwst">JWST calibration pipeline</a>. Pipelines, Steps, Routines and Tasks may implemented better as software objects.</li>
<li>XDGNIRS integration and <a class="reference external" href="http://ndmapper.readthedocs.io/en/latest/index.html">NDMAPPER (James EH Turner)</a> integration</li>
<li>Analysis tools: automatic velocity field? Dispersion?</li>
<li>Python 3 compatability(if possible)</li>
<li>Compiling as a self-contained executable</li>
<li>Full AstroConda integration</li>
</ul>
</div>
<div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<p>All notable changes to this project will be documented in this file.</p>
<p>The format is based on <a class="reference external" href="http://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>
and this project adheres to <a class="reference external" href="http://semver.org/spec/v2.0.0.html">Semantic Versioning</a>.</p>
<div class="section" id="unreleased">
<h2>Unreleased<a class="headerlink" href="#unreleased" title="Permalink to this headline">¶</a></h2>
<p>All in-development changes will be tracked here.</p>
<ul class="simple">
<li>Adding unit tests for each step and integration test for pipeline.</li>
</ul>
</div>
<div class="section" id="id3">
<h2>1.0.0 - 2017-09-12<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>First production release. Works fairly smoothly once raw data is located and sorted
properly.</p>
<ul class="simple">
<li>Rigorously tested first type of cube merging; not final wave shifting of cubes; with dummy data.</li>
<li>Finished integrating multiple types of cube merging.</li>
</ul>
</div>
<div class="section" id="b4-2017-09-12">
<h2>1.0b4 - 2017-09-12<a class="headerlink" href="#b4-2017-09-12" title="Permalink to this headline">¶</a></h2>
<p>Much refined and patched Beta release. Still not finished but much more robust.</p>
<ul class="simple">
<li>Verified overwrite; it seems to be safe to use now.</li>
<li>Fixing telluric correction and absolute flux calibration.</li>
<li>Added 1D extraction routine.</li>
<li>Preliminary addition of three types of cubes and cube merging.</li>
</ul>
</div>
<div class="section" id="b1-2017-09-08">
<h2>1.0b1 - 2017-09-08<a class="headerlink" href="#b1-2017-09-08" title="Permalink to this headline">¶</a></h2>
<p>Preliminary Beta release.</p>
<ul class="simple">
<li>Syntax errors mean this version will not compile.</li>
<li>Fixing merge flip due to differences between NIFS + ALTAIR and NIFS w/o ALTAIR on the bottom port.</li>
</ul>
</div>
<div class="section" id="a1-2017-08-31">
<h2>1.0a1 - 2017-08-31<a class="headerlink" href="#a1-2017-08-31" title="Permalink to this headline">¶</a></h2>
<p>Preliminary Alpha release.</p>
<ul class="simple">
<li>.whl uploaded to PIP, docs uploaded to</li>
</ul>
<p>ReadTheDocs and preliminary DOI assigned.</p>
</div>
</div>
<div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>Note: I didn’t have time to implement this using Sphinx automodule. Nifty has fairly good docstrings and you
can use individual steps, routines and tasks by importing them. This is a todo.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="fileIO.html" class="btn btn-neutral float-right" title="Example of Nifty File I/O" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Welcome to Nifty’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Nat Comeau.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0.dev1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>